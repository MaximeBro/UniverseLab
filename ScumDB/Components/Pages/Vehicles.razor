@page "/"

<PageTitle>ScumDb - Véhicules</PageTitle>

<MudContainer Class="mt-12" MaxWidth="MaxWidth.ExtraLarge">
    <MudDataGrid T="VehicleModel" Items="@_vehicles" QuickFilter="@QuickFilter" FixedHeader FixedFooter Bordered Striped Height="70vh"
                 Class="dark-bg mud-elevation-5" HeaderClass="dark-bg" FooterClass="dark-bg" RowClass="dark-bg">
        <ToolBarContent>
            <MudText Class="text-white">Véhicules</MudText>
            <MudSpacer/>
            <MudTextField T="string" @bind-Value="_search" Label="Rechercher" Placeholder="Laika" Immediate Adornment="Adornment.Start" AdornmentIcon="@(IconsM.Filled.Search)" Clearable />
        </ToolBarContent>
        <Columns>
            <PropertyColumn Title="Propriétaire (nom)" Property="x => x.OwnerName" HeaderClass="dark-bg" FooterClass="dark-bg"/>
            <PropertyColumn Title="Propriétaire (steamID)" AggregateDefinition="Aggregation" Property="x => x.OwnerId" HeaderClass="dark-bg" FooterClass="dark-bg"/>
            <PropertyColumn Title="Véhicule" Property="x => x.Name" HeaderClass="dark-bg" FooterClass="dark-bg"/>
            <TemplateColumn Title="Position" HeaderClass="dark-bg" FooterClass="dark-bg">
                <CellTemplate Context="row">
                    <MudGrid Spacing="0">
                        <MudItem xs="10">
                            <MudText>X:@row.Item.PositionX.ToString("F2") Y:@row.Item.PositionY.ToString("F2") Z:@row.Item.PositionZ.ToString("F2")</MudText>
                        </MudItem>
                        <MudItem xs="2">
                            <MudTooltip Text="Copier les coordonnées" Placement="Placement.Left" Arrow>
                                <MudIconButton Class="mr-0 mr-md-4" Size="Size.Small" Icon="@(IconsM.Filled.ContentCopy)" OnClick="@(async () => await CopyToClipboardAsync(row.Item))"/>
                            </MudTooltip>
                            <MudTooltip Text="Ouvrir la carte interactive" Placement="Placement.Left" Arrow>
                                <MudIconButton Class="purple-font" Size="Size.Small" Icon="@(IconsM.Filled.OpenInBrowser)" OnClick="@(async () => await OpenMapAsync(row.Item))"/>
                            </MudTooltip>
                        </MudItem>
                    </MudGrid>
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
</MudContainer>

